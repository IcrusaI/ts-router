# **ts-router**



–õ—ë–≥–∫–∏–π **SPA-—Ä–æ—É—Ç–µ—Ä –Ω–∞ TypeScript** –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤, –≥–¥–µ –Ω—É–∂–µ–Ω –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏, middleware –∏ –≥–∏–±–∫–∞—è —Ä–∞–±–æ—Ç–∞ —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏.

---

## **‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**

- üß≠ –î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã (/users/:id, /post/:slug)

- üîí Middleware (navigation guards)

- ‚Ü©Ô∏è Redirect-—Ä–æ—É—Ç—ã

- üö® Error-page –∏ 404 Not Found

- üîÑ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ Page-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (import())

- ‚è±Ô∏è –ó–∞—â–∏—Ç–∞ –æ—Ç –≥–æ–Ω–æ–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (navToken)

- ü™ü –ê–≤—Ç–æ-—Å–∫—Ä–æ–ª–ª + –ø–æ–¥–¥–µ—Ä–∂–∫–∞ #—è–∫–æ—Ä–µ–π

- üß© –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Layout –∏ Page –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏


---

## **üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞**



–ü–∞–∫–µ—Ç –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –≤ **GitHub Packages**. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω .npmrc:

```bash
@icrusai:registry=https://npm.pkg.github.com
//npm.pkg.github.com/:_authToken=${GITHUB_TOKEN}
```

–ó–∞—Ç–µ–º —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ:

```bash
npm install @icrusai/ts-router
```

---

## **üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç**



### **1) –°–æ–∑–¥–∞—ë–º —Å—Ç—Ä–∞–Ω–∏—Ü—É**

```ts
import Page from "ts-router/Page";

export default class HomePage extends Page {
  getTitle() { return "–ì–ª–∞–≤–Ω–∞—è"; }

  protected renderStructure() {
    const el = document.createElement("div");
    el.textContent = "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!";
    return el;
  }
}
```

### **2) –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Ä–æ—É—Ç–µ—Ä**

```ts
import Router from "ts-router/Router";
import HomePage from "./pages/HomePage";

const app = document.getElementById("app")!;

const router = new Router(app, { defaultTitle: "My App" });

router.register("/", () => HomePage);
router.register("/about", () => import("./pages/AboutPage"));

router.setNotFound(() => import("./pages/NotFoundPage"));
router.setErrorPage(() => import("./pages/ErrorPage"));

router.init();
```

---

## **üîß API –∫—Ä–∞—Ç–∫–æ**



### **Router**

- register(pattern, provider, opts?) ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –º–∞—Ä—à—Ä—É—Ç.

- setNotFound(provider) ‚Äî –∑–∞–¥–∞—ë—Ç 404-—Å—Ç—Ä–∞–Ω–∏—Ü—É.

- setErrorPage(provider) ‚Äî –∑–∞–¥–∞—ë—Ç error-—Å—Ç—Ä–∞–Ω–∏—Ü—É.

- navigate(to, opts?) ‚Äî –ø—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è.

- init() ‚Äî —Å—Ç–∞—Ä—Ç —Ä–æ—É—Ç–µ—Ä–∞ (–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ popstate + –ø–µ—Ä–≤—ã–π —Ä–µ–Ω–¥–µ—Ä).




### **Page**

- getTitle() ‚Äî –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤–∫–ª–∞–¥–∫–∏.

- query ‚Äî –æ–±—ä–µ–∫—Ç URLSearchParams.

- queryObj ‚Äî –ø—Ä–∏–≤–µ–¥—ë–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç –∏–∑ query-—Å—Ç—Ä–æ–∫–∏.

- renderStructure() ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç DOM –∏–ª–∏ Layout.


---

## **üìö –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Å—Ç—Ä–∞–Ω–∏—Ü**

- created ‚Äî —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ.

- beforeMount / afterMount ‚Äî –¥–æ –∏ –ø–æ—Å–ª–µ –≤—Å—Ç–∞–≤–∫–∏ –≤ DOM.

- beforeUnmount / unmounted ‚Äî –¥–æ –∏ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è.

- update ‚Äî –ø—Ä–∏ setState (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI).


---

## **üß™ –ü—Ä–∏–º–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞**



–í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –µ—Å—Ç—å –ø–∞–ø–∫–∞ example/, –≥–¥–µ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–º–æ:

```bash
npm run build        # —Å–±–æ—Ä–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
npm run dev:example  # –∑–∞–ø—É—Å–∫ –ø—Ä–∏–º–µ—Ä–∞ (vite)
```

---

## **üìù Conventional Commits**



–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ–ª–∏–∑–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è **Conventional Commits**.



–ü—Ä–∏–º–µ—Ä—ã:

- feat(router): –¥–æ–±–∞–≤–ª–µ–Ω middleware –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

- fix(slots): –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –±–∞–≥ —Å –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–º–∏ —Å–ª–æ—Ç–∞–º–∏

- docs(readme): –æ–±–Ω–æ–≤–ª—ë–Ω –ø—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞

- chore(release): –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π




**–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã:**

- feat: ‚Äî –Ω–æ–≤–∞—è —Ñ–∏—á–∞ ‚Üí –º–∏–Ω–æ—Ä–Ω—ã–π —Ä–µ–ª–∏–∑.

- fix: ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–∞ ‚Üí –ø–∞—Ç—á.

- BREAKING CHANGE: ‚Äî –∫—Ä—É–ø–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ API ‚Üí –º–∞–∂–æ—Ä–Ω—ã–π —Ä–µ–ª–∏–∑.

- docs: ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è.

- chore: ‚Äî —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏.

- refactor: ‚Äî —É–ª—É—á—à–µ–Ω–∏–µ –∫–æ–¥–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è.

- test: ‚Äî —Ç–µ—Å—Ç—ã.


---

## **üì¶ –†–µ–ª–∏–∑—ã**

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é **semantic-release**.

- –ü—É–±–ª–∏–∫—É—é—Ç—Å—è –≤ [GitHub Releases](../../releases) —Å changelog.

- –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø–∞–∫–µ—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ **GitHub Packages**.
